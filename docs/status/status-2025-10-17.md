# Platform Status – 2025-10-17 Snapshot

This snapshot consolidates the recent build, automation, UI, and manifest reports that were previously scattered across the repository. Detailed artefacts now live under `docs/archive/2025-10-17/`.

## Build & Tooling
- Build and API upgrades completed against Gradle 8.14.3 / Kotlin 2.0.21; 27 source files updated to resolve deprecated Compose, Hilt, and lint issues with clean `./gradlew build -x test` runs.
- Shimmer module lint configuration relaxed to unblock builds; debug and release APKs plus desktop artifacts verified.
- Remaining warnings are limited to Android SDK and Kotlin library deprecations (`NsdManager.resolveService`, `BluetoothAdapter.getDefaultAdapter`, `Instant` alias) and can be addressed when upstream updates land.
- Recommended follow-up: run `./gradlew test -Ptests.enabled=true` once the UI spacing refactors settle, and capture release notes for the API changes.

## Automation & Testing
- Automated desktop↔Android connection script now grants all 14 runtime permissions via ADB, boots the emulator, starts both agents, and verifies time sync within ~48 s. Screenshots and logs are produced automatically.
- Headless infrastructure harness exercises emulator, desktop orchestrator, and command stream without launching UIs; confirms gRPC transport readiness with low RTT (<10 ms) but does not yet enqueue commands—add a CLI or gRPC client call to validate start/stop flows end-to-end.
- Time synchronisation test harness adds 80+ unit and integration cases covering NTP math, drift estimation, and quality thresholds. Enable with `-Ptests.enabled=true`; invest in CI wiring once the remaining UI changes compile cleanly under test builds.
- Cross-platform automation scripts exist for Bash, PowerShell, Windows batch, and headless CI usage with automatic SDK discovery.

## UI Modernisation
- Five focused sessions delivered 93 improvements across 26 files, bringing button touch-target compliance to 30/45 (67 %), spacing standardisation to 59/120 (49 %), and 11 of 16 core screens to 100 % completion.
- Exemplars include `LiveSessionScreen`, `DevicesScreen`, `TopdonScreen`, and info/policy screens, all now using consistent spacing/tokens.
- High-priority remaining work (~40 min) targets button sizing on `TopdonGalleryScreen`, library detail screens, shared components, and debug utilities; spacing/text overflow cleanup (~2 h) remains across gallery, connection guide, settings, and library views.
- Established patterns: wrap buttons with `Modifier.defaultMinSize(minHeight = Dimensions.TouchTargetMinimum)`, replace raw `dp` constants with `Spacing.*`, and guard constrained text with `maxLines/overflow`.

## Manifest & Platform Readiness
- AndroidManifest overhaul delivers 100 % coverage of Topdon and Shimmer requirements plus additional permissions/features, with supporting resources (`device_filter.xml`, `provider_paths.xml`) and documentation.
- Verification logs confirm merged manifest success, lint readiness, and build outputs; quick-reference tables catalogue 29 declared permissions and component usages.
- Next execution steps draw from the former roadmap: implement runtime permission prompts, configure USB device auto-launch, wire FileProvider sharing, and follow the phased rollout for orchestrator integration.

## Next Actions Checklist
1. Finish the remaining high-priority UI button sizing and spacing fixes, retest critical screens, and rerun the accessibility checklist.
2. Execute the automated connection and headless command scripts after each UI/build change to guard against regressions; integrate with CI where possible.
3. Run the full unit/integration time-sync suite (`./gradlew :app:testDebugUnitTest -Ptests.enabled=true`) and capture baseline metrics for drift and RTT.
4. Tackle the manifest roadmap items (runtime permissions, USB intents, FileProvider) and update the archive once implementation milestones complete.

## Document Archive
- Detailed originals for build, testing, UI sessions, manifest analyses, and cross-platform automation are preserved under `docs/archive/2025-10-17/`. Refer there for session-by-session breakdowns, command transcripts, and exhaustive tables when deeper context is required.

// Summary for: /mnt/c/dev/buccancs/external/ShimmerCapturePure/sources/org/apache/commons/math3/analysis/FunctionUtils.java
// Size: 31419 bytes
// Modified: 2025-10-21 16:32:09.297017900 +0100

package org.apache.commons.math3.analysis;

import java.lang.reflect.Array;
import org.apache.commons.math3.analysis.differentiation.DerivativeStructure;
import org.apache.commons.math3.analysis.differentiation.MultivariateDifferentiableFunction;
import org.apache.commons.math3.analysis.differentiation.MultivariateDifferentiableVectorFunction;
import org.apache.commons.math3.analysis.differentiation.UnivariateDifferentiableFunction;
import org.apache.commons.math3.analysis.function.Identity;
import org.apache.commons.math3.exception.DimensionMismatchException;
import org.apache.commons.math3.exception.MathIllegalArgumentException;
import org.apache.commons.math3.exception.NotStrictlyPositiveException;
import org.apache.commons.math3.exception.NumberIsTooLargeException;
import org.apache.commons.math3.exception.util.LocalizedFormats;

/* loaded from: classes5.dex */
public class FunctionUtils {
    private FunctionUtils() {
    }

    public static UnivariateFunction compose(final UnivariateFunction... univariateFunctionArr) {
        return new UnivariateFunction() { // from class: org.apache.commons.math3.analysis.FunctionUtils.1
            @Override // org.apache.commons.math3.analysis.UnivariateFunction
            public double value(double d) {
                for (int length = univariateFunctionArr.length - 1; length >= 0; length--) {
                    d = univariateFunctionArr[length].value(d);
                }
                return d;
            }
        };
    }

    public static UnivariateDifferentiableFunction compose(final UnivariateDifferentiableFunction... univariateDifferentiableFunctionArr) {
        return new UnivariateDifferentiableFunction() { // from class: org.apache.commons.math3.analysis.FunctionUtils.2
            @Override // org.apache.commons.math3.analysis.UnivariateFunction
            public double value(double d) {
                for (int length = univariateDifferentiableFunctionArr.length - 1; length >= 0; length--) {
                    d = univariateDifferentiableFunctionArr[length].value(d);
                }
                return d;
            }

            @Override // org.apache.commons.math3.analysis.differentiation.UnivariateDifferentiableFunction
            public DerivativeStructure value(DerivativeStructure derivativeStructure) throws DimensionMismatchException {
                for (int length = univariateDifferentiableFunctionArr.length - 1; length >= 0; length--) {
                    derivativeStructure = univariateDifferentiableFunctionArr[length].value(derivativeStructure);
                }
                return derivativeStructure;
            }
        };
    }

    @Deprecated
    public static DifferentiableUnivariateFunction compose(final DifferentiableUnivariateFunction... differentiableUnivariateFunctionArr) {
        return new DifferentiableUnivariateFunction() { // from class: org.apache.commons.math3.analysis.FunctionUtils.3
            @Override // org.apache.commons.math3.analysis.UnivariateFunction
            public double value(double d) {
                for (int length = differentiableUnivariateFunctionArr.length - 1; length >= 0; length--) {
                    d = differentiableUnivariateFunctionArr[length].value(d);
                }
                return d;
            }

            @Override // org.apache.commons.math3.analysis.DifferentiableUnivariateFunction
            public UnivariateFunction derivative() {
                return new UnivariateFunction() { // from class: org.apache.commons.math3.analysis.FunctionUtils.3.1
                    @Override // org.apache.commons.math3.analysis.UnivariateFunction
                    public double value(double d) {
                        double dValue = 1.0d;
                        for (int length = differentiableUnivariateFunctionArr.length - 1; length >= 0; length--) {
                            dValue *= differentiableUnivariateFunctionArr[length].derivative().value(d);
                            d = differentiableUnivariateFunctionArr[length].value(d);
                        }
                        return dValue;
                    }
                };
            }
        };
    }

    public static UnivariateFunction add(final UnivariateFunction... univariateFunctionArr) {
        return new UnivariateFunction() { // from class: org.apache.commons.math3.analysis.FunctionUtils.4
            @Override // org.apache.commons.math3.analysis.UnivariateFunction
            public double value(double d) {
                double dValue = univariateFunctionArr[0].value(d);
                int i = 1;
                while (true) {
                    UnivariateFunction[] univariateFunctionArr2 = univariateFunctionArr;
                    if (i >= univariateFunctionArr2.length) {
                        return dValue;
                    }
                    dValue += univariateFunctionArr2[i].value(d);
                    i++;
                }
            }
        };
    }

    public static UnivariateDifferentiableFunction add(final UnivariateDifferentiableFunction... univariateDifferentiableFunctionArr) {
        return new UnivariateDifferentiableFunction() { // from class: org.apache.commons.math3.analysis.FunctionUtils.5
            @Override // org.apache.commons.math3.analysis.UnivariateFunction
            public double value(double d) {
                double dValue = univariateDifferentiableFunctionArr[0].value(d);
                int i = 1;
                while (true) {
                    UnivariateDifferentiableFunction[] univariateDifferentiableFunctionArr2 = univariateDifferentiableFunctionArr;
                    if (i >= univariateDifferentiableFunctionArr2.length) {
                        return dValue;
                    }
                    dValue += univariateDifferentiableFunctionArr2[i].value(d);
                    i++;
                }
            }

            @Override // org.apache.commons.math3.analysis.differentiation.UnivariateDifferentiableFunction
            public DerivativeStructure value(DerivativeStructure derivativeStructure) throws DimensionMismatchException {
                DerivativeStructure derivativeStructureValue = univariateDifferentiableFunctionArr[0].value(derivativeStructure);
                int i = 1;
                while (true) {
                    UnivariateDifferentiableFunction[] univariateDifferentiableFunctionArr2 = univariateDifferentiableFunctionArr;
                    if (i >= univariateDifferentiableFunctionArr2.length) {
                        return derivativeStructureValue;
                    }
                    derivativeStructureValue = derivativeStructureValue.add(univariateDifferentiableFunctionArr2[i].value(derivativeStructure));
                    i++;
                }
            }
        };
    }

    @Deprecated
    public static DifferentiableUnivariateFunction add(final DifferentiableUnivariateFunction... differentiableUnivariateFunctionArr) {
        return new DifferentiableUnivariateFunction() { // from class: org.apache.commons.math3.analysis.FunctionUtils.6
            @Override // org.apache.commons.math3.analysis.UnivariateFunction
            public double value(double d) {
                double dValue = differentiableUnivariateFunctionArr[0].value(d);
                int i = 1;
                while (true) {
                    DifferentiableUnivariateFunction[] differentiableUnivariateFunctionArr2 = differentiableUnivariateFunctionArr;
                    if (i >= differentiableUnivariateFunctionArr2.length) {
                        return dValue;
                    }
                    dValue += differentiableUnivariateFunctionArr2[i].value(d);
                    i++;
                }
            }

            @Override // org.apache.commons.math3.analysis.DifferentiableUnivariateFunction
            public UnivariateFunction derivative() {
                return new UnivariateFunction() { // from class: org.apache.commons.math3.analysis.FunctionUtils.6.1
                    @Override // org.apache.commons.math3.analysis.UnivariateFunction
                    public double value(double d) {
                        double dValue = differentiableUnivariateFunctionArr[0].derivative().value(d);
                        for (int i = 1; i < differentiableUnivariateFunctionArr.length; i++) {
                            dValue += differentiableUnivariateFunctionArr[i].derivative().value(d);
                        }
                        return dValue;
                    }
                };
            }
        };
    }

    public static UnivariateFunction multiply(final UnivariateFunction... univariateFunctionArr) {
        return new UnivariateFunction() { // from class: org.apache.commons.math3.analysis.FunctionUtils.7
            @Override // org.apache.commons.math3.analysis.UnivariateFunction
            public double value(double d) {
                double dValue = univariateFunctionArr[0].value(d);
                int i = 1;
                while (true) {
                    UnivariateFunction[] univariateFunctionArr2 = univariateFunctionArr;
                    if (i >= univariateFunctionArr2.length) {
                        return dValue;
                    }
                    dValue *= univariateFunctionArr2[i].value(d);
                    i++;
                }
            }
        };
    }

    public static UnivariateDifferentiableFunction multiply(final UnivariateDifferentiableFunction... univariateDifferentiableFunctionArr) {
        return new UnivariateDifferentiableFunction() { // from class: org.apache.commons.math3.analysis.FunctionUtils.8
            @Override // org.apache.commons.math3.analysis.UnivariateFunction
            public double value(double d) {
                double dValue = univariateDifferentiableFunctionArr[0].value(d);
                int i = 1;
                while (true) {
                    UnivariateDifferentiableFunction[] univariateDifferentiableFunctionArr2 = univariateDifferentiableFunctionArr;
                    if (i >= univariateDifferentiableFunctionArr2.length) {
                        return dValue;
                    }
                    dValue *= univariateDifferentiableFunctionArr2[i].value(d);
                    i++;
                }
            }

            @Override // org.apache.commons.math3.analysis.differentiation.UnivariateDifferentiableFunction
            public DerivativeStructure value(DerivativeStructure derivativeStructure) throws DimensionMismatchException {
                DerivativeStructure derivativeStructureValue = univariateDifferentiableFunctionArr[0].value(derivativeStructure);
                int i = 1;
                while (true) {
                    UnivariateDifferentiableFunction[] univariateDifferentiableFunctionArr2 = univariateDifferentiableFunctionArr;
                    if (i >= univariateDifferentiableFunctionArr2.length) {
                        return derivativeStructureValue;
                    }
                    derivativeStructureValue = derivativeStructureValue.multiply(univariateDifferentiableFunctionArr2[i].value(derivativeStructure));
                    i++;
                }
            }
        };
    }

    @Deprecated
    public static DifferentiableUnivariateFunction multiply(final DifferentiableUnivariateFunction... differentiableUnivariateFunctionArr) {
        return new DifferentiableUnivariateFunction() { // from class: org.apache.commons.math3.analysis.FunctionUtils.9
            @Override // org.apache.commons.math3.analysis.UnivariateFunction
            public double value(double d) {
                double dValue = differentiableUnivariateFunctionArr[0].value(d);
                int i = 1;
                while (true) {
                    DifferentiableUnivariateFunction[] differentiableUnivariateFunctionArr2 = differentiableUnivariateFunctionArr;
                    if (i >= differentiableUnivariateFunctionArr2.length) {
                        return dValue;
                    }
                    dValue *= differentiableUnivariateFunctionArr2[i].value(d);
                    i++;
                }
            }

            @Override // org.apache.commons.math3.analysis.DifferentiableUnivariateFunction
            public UnivariateFunction derivative() {
                return new UnivariateFunction() { // from class: org.apache.commons.math3.analysis.FunctionUtils.9.1
                    @Override // org.apache.commons.math3.analysis.UnivariateFunction
                    public double value(double d) {
                        double d2 = 0.0d;
                        for (int i = 0; i < differentiableUnivariateFunctionArr.length; i++) {
                            double dValue = differentiableUnivariateFunctionArr[i].derivative().value(d);
                            for (int i2 = 0; i2 < differentiableUnivariateFunctionArr.length; i2++) {
                                if (i != i2) {
                                    dValue *= differentiableUnivariateFunctionArr[i2].value(d);
                                }
                            }
                            d2 += dValue;
                        }
                        return d2;
                    }
                };
            }
        };
    }

    public static UnivariateFunction combine(final BivariateFunction bivariateFunction, final UnivariateFunction univariateFunction, final UnivariateFunction univariateFunction2) {
        return new UnivariateFunction() { // from class: org.apache.commons.math3.analysis.FunctionUtils.10
            @Override // org.apache.commons.math3.analysis.UnivariateFunction
            public double value(double d) {
                return bivariateFunction.value(univariateFunction.value(d), univariateFunction2.value(d));
            }
        };
    }

    public static MultivariateFunction collector(final BivariateFunction bivariateFunction, final UnivariateFunction univariateFunction, final double d) {
        return new MultivariateFunction() { // from class: org.apache.commons.math3.analysis.FunctionUtils.11
            @Override // org.apache.commons.math3.analysis.MultivariateFunction
            public double value(double[] dArr) {
                double dValue = bivariateFunction.value(d, univariateFunction.value(dArr[0]));
                for (int i = 1; i < dArr.length; i++) {
                    dValue = bivariateFunction.value(dValue, univariateFunction.value(dArr[i]));
                }
                return dValue;
            }
        };
    }

    public static MultivariateFunction collector(BivariateFunction bivariateFunction, double d) {
        return collector(bivariateFunction, new Identity(), d);
    }

    public static UnivariateFunction fix1stArgument(final BivariateFunction bivariateFunction, final double d) {
        return new UnivariateFunction() { // from class: org.apache.commons.math3.analysis.FunctionUtils.12
            @Override // org.apache.commons.math3.analysis.UnivariateFunction
            public double value(double d2) {
                return bivariateFunction.value(d, d2);
            }
        };
    }

    public static UnivariateFunction fix2ndArgument(final BivariateFunction bivariateFunction, final double d) {
        return new UnivariateFunction() { // from class: org.apache.commons.math3.analysis.FunctionUtils.13
            @Override // org.apache.commons.math3.analysis.UnivariateFunction
            public double value(double d2) {
                return bivariateFunction.value(d2, d);
            }
        };
    }

    public static double[] sample(UnivariateFunction univariateFunction, double d, double d2, int i) throws NotStrictlyPositiveException, NumberIsTooLargeException {
        if (i <= 0) {
            throw new NotStrictlyPositiveException(LocalizedFormats.NOT_POSITIVE_NUMBER_OF_SAMPLES, Integer.valueOf(i));
        }
        if (d >= d2) {
            throw new NumberIsTooLargeException(Double.valueOf(d), Double.valueOf(d2), false);
        }
        double[] dArr = new double[i];
        double d3 = (d2 - d) / i;
        for (int i2 = 0; i2 < i; i2++) {
            dArr[i2] = univariateFunction.value((i2 * d3) + d);
        }
        return dArr;
    }

    @Deprecated
    public static DifferentiableUnivariateFunction toDifferentiableUnivariateFunction(final UnivariateDifferentiableFunction univariateDifferentiableFunction) {
        return new DifferentiableUnivariateFunction() { // from class: org.apache.commons.math3.analysis.FunctionUtils.14
            @Override // org.apache.commons.math3.analysis.UnivariateFunction
            public double value(double d) {
                return univariateDifferentiableFunction.value(d);
            }

            @Override // org.apache.commons.math3.analysis.DifferentiableUnivariateFunction
            public UnivariateFunction derivative() {
                return new UnivariateFunction() { // from class: org.apache.commons.math3.analysis.FunctionUtils.14.1
                    @Override // org.apache.commons.math3.analysis.UnivariateFunction
                    public double value(double d) {
                        return univariateDifferentiableFunction.value(new DerivativeStructure(1, 1, 0, d)).getPartialDerivative(1);
                    }
                };
            }
        };
    }

    @Deprecated
    public static UnivariateDifferentiableFunction toUnivariateDifferential(final DifferentiableUnivariateFunction differentiableUnivariateFunction) {
        return new UnivariateDifferentiableFunction() { // from class: org.apache.commons.math3.analysis.FunctionUtils.15
            @Override // org.apache.commons.math3.analysis.UnivariateFunction
            public double value(double d) {
                return differentiableUnivariateFunction.value(d);
            }

            @Override // org.apache.commons.math3.analysis.differentiation.UnivariateDifferentiableFunction
            public DerivativeStructure value(DerivativeStructure derivativeStructure) throws NumberIsTooLargeException {
                int order = derivativeStructure.getOrder();
                if (order == 0) {
                    return new DerivativeStructure(derivativeStructure.getFreeParameters(), 0, differentiableUnivariateFunction.value(derivativeStructure.getValue()));
                }
                if (order == 1) {
                    int freeParameters = derivativeStructure.getFreeParameters();
                    double[] dArr = new double[freeParameters + 1];
                    dArr[0] = differentiableUnivariateFunction.value(derivativeStructure.getValue());
                    double dValue = differentiableUnivariateFunction.derivative().value(derivativeStructure.getValue());
                    int[] iArr = new int[freeParameters];
                    int i = 0;
                    while (i < freeParameters) {
                        iArr[i] = 1;
                        int i2 = i + 1;
                        dArr[i2] = derivativeStructure.getPartialDerivative(iArr) * dValue;
                        iArr[i] = 0;
                        i = i2;
                    }
                    return new DerivativeStructure(freeParameters, 1, dArr);
                }
                throw new NumberIsTooLargeException(Integer.valueOf(derivativeStructure.getOrder()), 1, true);
            }
        };
    }

    @Deprecated
    public static DifferentiableMultivariateFunction toDifferentiableMultivariateFunction(final MultivariateDifferentiableFunction multivariateDifferentiableFunction) {
        return new DifferentiableMultivariateFunction() { // from class: org.apache.commons.math3.analysis.FunctionUtils.16
            @Override // org.apache.commons.math3.analysis.MultivariateFunction
            public double value(double[] dArr) {
                return multivariateDifferentiableFunction.value(dArr);
            }

            @Override // org.apache.commons.math3.analysis.DifferentiableMultivariateFunction
            public MultivariateFunction partialDerivative(final int i) {
                return new MultivariateFunction() { // from class: org.apache.commons.math3.analysis.FunctionUtils.16.1
                    @Override // org.apache.commons.math3.analysis.MultivariateFunction
                    public double value(double[] dArr) {
                        int length = dArr.length;
                        DerivativeStructure[] derivativeStructureArr = new DerivativeStructure[length];
                        for (int i2 = 0; i2 < length; i2++) {
                            if (i2 == i) {
                                derivativeStructureArr[i2] = new DerivativeStructure(1, 1, 0, dArr[i2]);
                            } else {
                                derivativeStructureArr[i2] = new DerivativeStructure(1, 1, dArr[i2]);
                            }
                        }
                        return multivariateDifferentiableFunction.value(derivativeStructureArr).getPartialDerivative(1);
                    }
                };
            }

            @Override // org.apache.commons.math3.analysis.DifferentiableMultivariateFunction
            public MultivariateVectorFunction gradient() {
                return new MultivariateVectorFunction() { // from class: org.apache.commons.math3.analysis.FunctionUtils.16.2
                    @Override // org.apache.commons.math3.analysis.MultivariateVectorFunction
                    public double[] value(double[] dArr) throws MathIllegalArgumentException {
                        int length = dArr.length;
                        DerivativeStructure[] derivativeStructureArr = new DerivativeStructure[length];
                        for (int i = 0; i < length; i++) {
                            derivativeStructureArr[i] = new DerivativeStructure(length, 1, i, dArr[i]);
                        }
                        DerivativeStructure derivativeStructureValue = multivariateDifferentiableFunction.value(derivativeStructureArr);
                        double[] dArr2 = new double[length];
                        int[] iArr = new int[length];
                        for (int i2 = 0; i2 < length; i2++) {
                            iArr[i2] = 1;
                            dArr2[i2] = derivativeStructureValue.getPartialDerivative(iArr);
                            iArr[i2] = 0;
                        }
                        return dArr2;
                    }
                };
            }
        };
    }

    @Deprecated
    public static MultivariateDifferentiableFunction toMultivariateDifferentiableFunction(final DifferentiableMultivariateFunction differentiableMultivariateFunction) {
        return new MultivariateDifferentiableFunction() { // from class: org.apache.commons.math3.analysis.FunctionUtils.17
            @Override // org.apache.commons.math3.analysis.MultivariateFunction
            public double value(double[] dArr) {
                return differentiableMultivariateFunction.value(dArr);
            }

            @Override // org.apache.commons.math3.analysis.differentiation.MultivariateDifferentiableFunction
            public DerivativeStructure value(DerivativeStructure[] derivativeStructureArr) throws IllegalArgumentException {
                int freeParameters = derivativeStructureArr[0].getFreeParameters();
                int order = derivativeStructureArr[0].getOrder();
                int length = derivativeStructureArr.length;
                int i = 1;
                if (order > 1) {
                    throw new NumberIsTooLargeException(Integer.valueOf(order), 1, true);
                }
                for (int i2 = 0; i2 < length; i2++) {
                    if (derivativeStructureArr[i2].getFreeParameters() != freeParameters) {
                        throw new DimensionMismatchException(derivativeStructureArr[i2].getFreeParameters(), freeParameters);
                    }
                    if (derivativeStructureArr[i2].getOrder() != order) {
                        throw new DimensionMismatchException(derivativeStructureArr[i2].getOrder(), order);
                    }
                }
                double[] dArr = new double[length];
                for (int i3 = 0; i3 < length; i3++) {
                    dArr[i3] = derivativeStructureArr[i3].getValue();
                }
                double dValue = differentiableMultivariateFunction.value(dArr);
                double[] dArrValue = differentiableMultivariateFunction.gradient().value(dArr);
                double[] dArr2 = new double[freeParameters + 1];
                dArr2[0] = dValue;
                int[] iArr = new int[freeParameters];
                int i4 = 0;
                while (i4 < freeParameters) {
                    iArr[i4] = i;
                    for (int i5 = 0; i5 < length; i5++) {
                        int i6 = i4 + 1;
                        dArr2[i6] = dArr2[i6] + (dArrValue[i5] * derivativeStructureArr[i5].getPartialDerivative(iArr));
                    }
                    iArr[i4] = 0;
                    i4++;
                    i = 1;
                }
                return new DerivativeStructure(freeParameters, order, dArr2);
            }
        };
    }

    @Deprecated
    public static DifferentiableMultivariateVectorFunction toDifferentiableMultivariateVectorFunction(final MultivariateDifferentiableVectorFunction multivariateDifferentiableVectorFunction) {
        return new DifferentiableMultivariateVectorFunction() { // from class: org.apache.commons.math3.analysis.FunctionUtils.18
            @Override // org.apache.commons.math3.analysis.MultivariateVectorFunction
            public double[] value(double[] dArr) {
                return multivariateDifferentiableVectorFunction.value(dArr);
            }

            @Override // org.apache.commons.math3.analysis.DifferentiableMultivariateVectorFunction
            public MultivariateMatrixFunction jacobian() {
                return new MultivariateMatrixFunction() { // from class: org.apache.commons.math3.analysis.FunctionUtils.18.1
                    @Override // org.apache.commons.math3.analysis.MultivariateMatrixFunction
                    public double[][] value(double[] dArr) throws MathIllegalArgumentException {
                        int length = dArr.length;
                        DerivativeStructure[] derivativeStructureArr = new DerivativeStructure[length];
                        for (int i = 0; i < length; i++) {
                            derivativeStructureArr[i] = new DerivativeStructure(length, 1, i, dArr[i]);
                        }
                        DerivativeStructure[] derivativeStructureArrValue = multivariateDifferentiableVectorFunction.value(derivativeStructureArr);
                        double[][] dArr2 = (double[][]) Array.newInstance((Class<?>) Double.TYPE, derivativeStructureArrValue.length, length);
                        int[] iArr = new int[length];
                        for (int i2 = 0; i2 < derivativeStructureArrValue.length; i2++) {
                            for (int i3 = 0; i3 < length; i3++) {
                                iArr[i3] = 1;
                                dArr2[i2][i3] = derivativeStructureArrValue[i2].getPartialDerivative(iArr);
                                iArr[i3] = 0;
                            }
                        }
                        return dArr2;
                    }
                };
            }
        };
    }

    @Deprecated
    public static MultivariateDifferentiableVectorFunction toMultivariateDifferentiableVectorFunction(final DifferentiableMultivariateVectorFunction differentiableMultivariateVectorFunction) {
        return new MultivariateDifferentiableVectorFunction() { // from class: org.apache.commons.math3.analysis.FunctionUtils.19
            @Override // org.apache.commons.math3.analysis.MultivariateVectorFunction
            public double[] value(double[] dArr) {
                return differentiableMultivariateVectorFunction.value(dArr);
            }

            @Override // org.apache.commons.math3.analysis.differentiation.MultivariateDifferentiableVectorFunction
            public DerivativeStructure[] value(DerivativeStructure[] derivativeStructureArr) throws IllegalArgumentException {
                int freeParameters = derivativeStructureArr[0].getFreeParameters();
                int order = derivativeStructureArr[0].getOrder();
                int length = derivativeStructureArr.length;
                int i = 1;
                if (order > 1) {
                    throw new NumberIsTooLargeException(Integer.valueOf(order), 1, true);
                }
                for (int i2 = 0; i2 < length; i2++) {
                    if (derivativeStructureArr[i2].getFreeParameters() != freeParameters) {
                        throw new DimensionMismatchException(derivativeStructureArr[i2].getFreeParameters(), freeParameters);
                    }
                    if (derivativeStructureArr[i2].getOrder() != order) {
                        throw new DimensionMismatchException(derivativeStructureArr[i2].getOrder(), order);
                    }
                }
                double[] dArr = new double[length];
                for (int i3 = 0; i3 < length; i3++) {
                    dArr[i3] = derivativeStructureArr[i3].getValue();
                }
                double[] dArrValue = differentiableMultivariateVectorFunction.value(dArr);
                double[][] dArrValue2 = differentiableMultivariateVectorFunction.jacobian().value(dArr);
                int length2 = dArrValue.length;
                DerivativeStructure[] derivativeStructureArr2 = new DerivativeStructure[length2];
                int i4 = 0;
                while (i4 < length2) {
                    double[] dArr2 = new double[freeParameters + 1];
                    dArr2[0] = dArrValue[i4];
                    int[] iArr = new int[freeParameters];
                    int i5 = 0;
                    while (i5 < freeParameters) {
                        iArr[i5] = i;
                        for (int i6 = 0; i6 < length; i6++) {
                            int i7 = i5 + 1;
                            dArr2[i7] = dArr2[i7] + (dArrValue2[i4][i6] * derivativeStructureArr[i6].getPartialDerivative(iArr));
                        }
                        iArr[i5] = 0;
                        i5++;
                        i = 1;
                    }
                    derivativeStructureArr2[i4] = new DerivativeStructure(freeParameters, order, dArr2);
                    i4++;
                    i = 1;
                }
                return derivativeStructureArr2;
            }
        };
    }
}
